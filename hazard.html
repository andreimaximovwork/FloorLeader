<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hazard Identification Game</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
<style>
html,
body {
  position: relative;
  width: 100%;
  height: 100%;
  margin: 0;
  font-family: 'Open Sans', sans-serif;
  min-height: 100vh;
  overflow: hidden;
}

body::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('https://www.channelnews.com.au/wp-content/uploads/2022/03/JB-Hi-Fi-Store-Sydney.png') no-repeat center center;
  background-size: cover;
  opacity: 0.1;
  z-index: -1;
}

* {
  outline: 0;
}

.Wrapper {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 0;
  margin: 0;
  z-index: 1;
}

.title {
  font-size: 2em;
  font-weight: bold;
  margin: 20px 0;
}

.game-container {
  max-width: 800px;
  width: 100%;
  border: 5px solid #333;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  margin: 10px 0;
}

.Button {
  margin-bottom: 50px;
  perspective: 600px;
  position: relative;
  z-index: 2;
}

.Button--start {
  width: 240px;
  height: 90px;
}

button {
  position: relative;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  border: 0;
  box-shadow: 0px 0px 0px #750014;
  background: radial-gradient(ellipse at center, #D60D2E 0%, #C20020 100%);
  transition: transform 0.15s, box-shadow 0.15s;
  transform: rotateX(0deg) translateY(0);
  cursor: pointer;
  -webkit-font-smoothing: antialiased;
  border-radius: 4px;
}

button:hover {
  box-shadow: 0px 5px 0px #750014;
  transform: rotateX(30deg) translateY(0);
}

button:hover:active {
  text-shadow: 0 0 4px #AD001D;
  box-shadow: 0 1px 0 #423847;
  background: radial-gradient(ellipse at center, #FF002B 0%, #ED0028 100%);
  transition: transform 0.05s, box-shadow 0.05s;
  transform: rotateX(30deg) translateY(4px);
}

button span {
  position: relative;
  font-size: 30px;
  color: white;
  text-transform: uppercase;
  transform: translate3d(0, 0, 0);
}

.game-container {
  display: none;
  position: relative;
  max-width: 800px;
  width: 100%;
  border: 5px solid #333;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.hazard-image {
  width: 100%;
  display: block;
}

.hotspot {
  position: absolute;
  border: none;
  background-color: transparent;
  border-radius: 5px;
}

.popup {
  position: absolute;
  background-color: #fff;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  display: none;
  max-width: 90%;
  opacity: 0;
}

.popup.show {
  transform: scale(1);
  opacity: 1;
}

.popup h3 {
  margin-top: 0;
}

.popup button {
  background-color: #ff6347;
  color: #fff;
  border: none;
  padding: 10px 20px; /* Adjusted padding to maintain the original button shape */
  cursor: pointer;
  border-radius: 5px;
  font-weight: bold;
  width: auto; /* Ensure width fits the content */
  height: auto; /* Ensure height fits the content */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Optional: Add a box shadow to make it look consistent with other buttons */
  transform: none; /* Remove tilting effect */
  transition: background-color 0.15s; /* Keep a hover effect for background color */
}
.popup button:hover {
  background-color: #ff4500;
}


.completion-message {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #28a745;
  color: #fff;
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
  text-align: center;
  font-size: 1.5em;
  display: none;
  transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  animation: bounceIn 0.6s ease;
}

.completion-message.show {
  transform: translate(-50%, -50%) scale(1);
  display: block;
}

@keyframes bounceIn {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.05);
  }
  70% {
    transform: translate(-50%, -50%) scale(0.9);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
}
</style>
</head>
<body>
<main class="Wrapper">
  <div class="title"></div>
  <div class="menu-container Button Button--start" id="menu">
    <button onclick="playAnimationThenStartGame(event)" class="Button"><span>Play</span></button>
  </div>
  <div class="game-container" id="gameContainer">
    <img src="https://www.mailtimes.com.au/images/transform/v1/crop/frm/silverstone-feed-data/43c4fbfd-168f-457a-a4a3-5fdaaf3aba7c.jpg/r0_0_800_600_w1200_h678_fmax.webp" alt="Hazard Scene" class="hazard-image" id="hazardImage">
    <div class="hotspot" style="top: 30%; left: 20%; width: 10%; height: 50%;" data-info="This is a potential thief."></div>
    <div class="hotspot" style="top: 55%; left: 70%; width: 7%; height: 20%;" data-info="There is stock missing from a Big Buy."></div>
    <div class="hotspot" style="top: 5%; left: 70%; width: 30%; height: 40%;" data-info="Pretty good sign."></div>
  </div>
  <div class="popup" id="popup">
    <h3>Hazard Identified</h3>
    <p id="popupInfo"></p>
    <button onclick="closePopup()">Close</button>
  </div>
  <div class="completion-message" id="completionMessage">All hazards have been identified! <br>You may proceed.</div>
</main>

<script>
const menu = document.getElementById('menu');
const gameContainer = document.getElementById('gameContainer');
const hotspots = document.querySelectorAll('.hotspot');
const popup = document.getElementById('popup');
const popupInfo = document.getElementById('popupInfo');
const completionMessage = document.getElementById('completionMessage');
let identifiedCount = 0;

function playAnimationThenStartGame(e) {
  e.preventDefault();
  const button = e.target;
  button.classList.add('animate');
  setTimeout(() => {
    button.classList.remove('animate');
    startGame();
  }, 300); // Wait for 0.3 seconds before starting the game
}

function startGame() {
  menu.style.display = 'none';
  gameContainer.style.display = 'block';
}

hotspots.forEach(hotspot => {
  hotspot.addEventListener('click', function() {
    const info = this.getAttribute('data-info');
    popupInfo.textContent = info;

    // Set the popup's position based on the hotspot's position
    popup.style.top = `${this.offsetTop + this.offsetHeight / 2}px`;
    popup.style.left = `${this.offsetLeft + this.offsetWidth / 2}px`;

    // Show the popup with animation
    popup.classList.add('show');
    popup.style.display = 'block';

    if (!this.classList.contains('identified')) {
      this.classList.add('identified');
      identifiedCount++;
    }
  });
}); 

function closePopup() {
  popup.classList.remove('show');
  setTimeout(() => {
    popup.style.display = 'none';
    if (identifiedCount === hotspots.length) {
      completionMessage.classList.add('show');
      completionMessage.style.display = 'block';
      hotspots.forEach(hotspot => hotspot.style.display = 'none');
      console.log('Game completed');
    }
  }, 300); // Wait for the animation to complete before hiding
}
</script>
</body>
</html>
