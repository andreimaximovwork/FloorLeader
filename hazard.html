<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hazard Identification Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html,
        body {
            position: relative;
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: 'Open Sans', sans-serif;
            background-color: #ffffff;
            min-height: 100vh; /* Ensures full height inside iframe */
            overflow: hidden;
        }

        * {
            outline: 0;
        }

        .Wrapper {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100vh; /* Ensures the wrapper takes full viewport height */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align content to the top */
            align-items: center;
            text-align: center;
            padding: 0; /* Remove any padding */
            margin: 0; /* Remove any margin */
        }

        .title {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0; /* Reduced the space between the title and the rest */
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            border: 5px solid #333;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            margin: 10px 0; /* Reduced the space below the game container */
        }

        .Button {
            margin-bottom: 50px;
            perspective: 600px;
        }

        .Button--start {
            width: 240px;
            height: 90px;
        }

        button {
            position: relative;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            border: 0;
            box-shadow: 0px 0px 0px #750014;
            background: radial-gradient(ellipse at center, #D60D2E 0%, #C20020 100%);
            transition: transform 0.15s, box-shadow 0.15s;
            transform: rotateX(0deg) translateY(0);
            cursor: pointer;
            -webkit-font-smoothing: antialiased;
            border-radius: 4px;
        }

        button:hover {
            box-shadow: 0px 5px 0px #750014;
            transform: rotateX(30deg) translateY(0);
        }

        button:hover:active {
            text-shadow: 0 0 4px #AD001D;
            box-shadow: 0 1px 0 #423847;
            background: radial-gradient(ellipse at center, #FF002B 0%, #ED0028 100%);
            transition: transform 0.05s, box-shadow 0.05s;
            transform: rotateX(30deg) translateY(4px);
        }

        button span {
            position: relative;
            font-size: 30px;
            color: white;
            text-transform: uppercase;
            transform: translate3d(0, 0, 0);
        }

        .game-container {
            display: none;
            position: relative;
            max-width: 800px;
            width: 100%;
            border: 5px solid #333;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .hazard-image {
            width: 100%;
            display: block;
        }

        .hotspot {
            position: absolute;
            border: none; /* Remove border to make it invisible */
            background-color: transparent;
            border-radius: 5px;
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: none;
            max-width: 90%;
        }

        .popup h3 {
            margin-top: 0;
        }

        .popup button {
            background-color: #ff6347;
            color: #fff;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }

        .popup button:hover {
            background-color: #ff4500;
        }

        .completion-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #28a745;
            color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            text-align: center;
            font-size: 1.5em;
            display: none;
        }
    </style>
</head>
<body>
    <main class="Wrapper">
        <div class="title">SPOT THE HAZARD</div>
        <div class="menu-container Button Button--start" id="menu">
            <button onclick="playAnimationThenStartGame(event)"><span>Play</span></button>
        </div>
        <div class="game-container" id="gameContainer">
            <img src="https://www.mailtimes.com.au/images/transform/v1/crop/frm/silverstone-feed-data/43c4fbfd-168f-457a-a4a3-5fdaaf3aba7c.jpg/r0_0_800_600_w1200_h678_fmax.webp" alt="Hazard Scene" class="hazard-image" id="hazardImage">
            <div class="hotspot" style="top: 30%; left: 20%; width: 10%; height: 50%;" data-info="This is a potential thief."></div>
            <div class="hotspot" style="top: 55%; left: 70%; width: 7%; height: 20%;" data-info="There is stock missing from a Big Buy."></div>
            <div class="hotspot" style="top: 5%; left: 70%; width: 30%; height: 40%;" data-info="Pretty good sign."></div>
        </div>
        <div class="popup" id="popup">
            <h3>Hazard Identified</h3>
            <p id="popupInfo"></p>
            <button onclick="closePopup()">Close</button>
        </div>
        <div class="completion-message" id="completionMessage">All hazards have been identified! You may proceed.</div>
    </main>

    <script>
        const menu = document.getElementById('menu');
        const gameContainer = document.getElementById('gameContainer');
        const hotspots = document.querySelectorAll('.hotspot');
        const popup = document.getElementById('popup');
        const popupInfo = document.getElementById('popupInfo');
        const completionMessage = document.getElementById('completionMessage');
        let identifiedCount = 0;

        function playAnimationThenStartGame(e) {
            e.preventDefault();
            const button = e.target;
            button.classList.add('animate');
            setTimeout(() => {
                button.classList.remove('animate');
                startGame();
            }, 300); // Wait for 0.3 seconds before starting the game
        }

        function startGame() {
            menu.style.display = 'none';
            gameContainer.style.display = 'block';
        }

        hotspots.forEach(hotspot => {
            hotspot.addEventListener('click', function() {
                const info = this.getAttribute('data-info');
                popupInfo.textContent = info;
                popup.style.display = 'block';
                if (!this.classList.contains('identified')) {
                    this.classList.add('identified');
                    identifiedCount++;
                }
            });
        });

        function closePopup() {
            popup.style.display = 'none';
            if (identifiedCount === hotspots.length) {
                completionMessage.style.display = 'block';
                hotspots.forEach(hotspot => hotspot.style.display = 'none');
                console.log('Game completed');
            }
        }
    </script>
</body>
</html>
